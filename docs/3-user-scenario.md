# 사용자 시나리오: my-todolist

## 문서 정보

| 항목 | 내용 |
|------|------|
| 버전 | v1.0 |
| 작성일 | 2026-02-10 |
| 근거 문서 | PRD v1.0 |

---

## 1. 정상 흐름 시나리오 (Happy Path)

#### SC-H-01: 신규 회원가입
- **관련 기능**: F-01
- **전제 조건**: 해당 이메일로 가입된 계정 없음
- **실행 단계**:
  1. 이메일(RFC 5322 형식), 비밀번호(8자 이상, 영문+숫자 포함), 닉네임 입력 후 가입 요청
- **기대 결과**: HTTP 201, 계정 생성 완료
- **관련 인수 기준**: F-01-1

---

#### SC-H-02: 로그인 및 JWT 발급
- **관련 기능**: F-02
- **전제 조건**: 유효한 계정 존재
- **실행 단계**:
  1. 가입된 이메일과 비밀번호로 로그인 요청
- **기대 결과**: HTTP 200, JWT 토큰 발급(유효기간 24시간)
- **관련 인수 기준**: F-02-1

---

#### SC-H-03: 할 일 생성 (제목만 입력)
- **관련 기능**: F-03
- **전제 조건**: 로그인 상태(유효한 JWT 보유)
- **실행 단계**:
  1. 제목만 입력하여 할 일 생성 요청 (설명, dueDate 생략)
- **기대 결과**: HTTP 201, status=PENDING으로 할 일 생성됨
- **관련 인수 기준**: F-03-1, F-03-2

---

#### SC-H-04: 할 일 생성 (전체 필드 입력)
- **관련 기능**: F-03
- **전제 조건**: 로그인 상태(유효한 JWT 보유)
- **실행 단계**:
  1. 제목, 설명, dueDate 모두 입력하여 할 일 생성 요청
- **기대 결과**: HTTP 201, status=PENDING으로 할 일 생성됨
- **관련 인수 기준**: F-03-1, F-03-2

---

#### SC-H-05: 할 일 목록 조회 (overdue 없음)
- **관련 기능**: F-04
- **전제 조건**: 로그인 상태, 마감일이 미래이거나 없는 PENDING 항목 보유
- **실행 단계**:
  1. 할 일 목록 조회 요청
- **기대 결과**: HTTP 200, 본인 소유 항목만 반환, 모든 항목 overdue:false
- **관련 인수 기준**: F-04-1, F-04-2

---

#### SC-H-06: 할 일 목록 조회 (overdue 항목 포함)
- **관련 기능**: F-04, F-08
- **전제 조건**: 로그인 상태, dueDate가 오늘 이전이고 status=PENDING인 항목 존재
- **실행 단계**:
  1. 할 일 목록 조회 요청
- **기대 결과**: HTTP 200, 해당 항목 overdue:true 반환, UI에 붉은 배지 표시
- **관련 인수 기준**: F-04-2, F-08-1

---

#### SC-H-07: 할 일 수정
- **관련 기능**: F-05
- **전제 조건**: 로그인 상태, 본인 소유 할 일 존재
- **실행 단계**:
  1. 본인 소유 할 일의 제목·설명·dueDate 수정 요청
- **기대 결과**: HTTP 200, 변경된 내용 반영
- **관련 인수 기준**: F-05-1

---

#### SC-H-08: 할 일 삭제
- **관련 기능**: F-06
- **전제 조건**: 로그인 상태, 본인 소유 할 일 존재
- **실행 단계**:
  1. 본인 소유 할 일 삭제 요청
  2. 삭제된 항목 동일 ID로 재조회 요청
- **기대 결과**: 삭제 시 HTTP 200(또는 204), 재조회 시 HTTP 404
- **관련 인수 기준**: F-06-1, F-06-2

---

#### SC-H-09: 할 일 완료 처리 (PENDING → DONE)
- **관련 기능**: F-07
- **전제 조건**: 로그인 상태, status=PENDING인 본인 소유 할 일 존재
- **실행 단계**:
  1. 해당 할 일에 완료 처리 요청
- **기대 결과**: HTTP 200, status=DONE으로 변경
- **관련 인수 기준**: F-07-2

---

#### SC-H-10: 할 일 완료 취소 (DONE → PENDING)
- **관련 기능**: F-07
- **전제 조건**: 로그인 상태, status=DONE인 본인 소유 할 일 존재
- **실행 단계**:
  1. 해당 할 일에 완료 취소 요청
- **기대 결과**: HTTP 200, status=PENDING으로 변경
- **관련 인수 기준**: F-07-4

---

#### SC-H-11: DONE 항목 overdue 배지 미표시
- **관련 기능**: F-08
- **전제 조건**: 로그인 상태, dueDate가 오늘 이전이고 status=DONE인 항목 존재
- **실행 단계**:
  1. 할 일 목록 조회 요청
- **기대 결과**: HTTP 200, 해당 항목 overdue:false, UI에 붉은 배지 미표시
- **관련 인수 기준**: F-08-2

---

## 2. 예외 흐름 시나리오 (Error Path)

#### SC-E-01: 중복 이메일로 회원가입 시도
- **관련 기능**: F-01
- **전제 조건**: 동일 이메일로 이미 가입된 계정 존재
- **실행 단계**:
  1. 이미 등록된 이메일로 회원가입 요청
- **기대 결과**: HTTP 409 Conflict
- **관련 인수 기준**: F-01-2

---

#### SC-E-02: 비밀번호 정책 미충족으로 회원가입 시도
- **관련 기능**: F-01
- **전제 조건**: 없음
- **실행 단계**:
  1. 비밀번호를 7자 이하, 또는 영문 미포함, 또는 숫자 미포함으로 회원가입 요청
- **기대 결과**: HTTP 400, 가입 실패
- **관련 인수 기준**: F-01-3

---

#### SC-E-03: 잘못된 자격증명으로 로그인 시도
- **관련 기능**: F-02
- **전제 조건**: 유효한 계정 존재
- **실행 단계**:
  1. 올바르지 않은 비밀번호로 로그인 요청
- **기대 결과**: HTTP 401 Unauthorized, JWT 미발급
- **관련 인수 기준**: F-02-2

---

#### SC-E-04: 미인증 상태에서 할 일 생성 시도
- **관련 기능**: F-03
- **전제 조건**: JWT 없음 또는 만료된 JWT 보유
- **실행 단계**:
  1. Authorization 헤더 없이 또는 만료 토큰으로 할 일 생성 요청
- **기대 결과**: HTTP 401 Unauthorized
- **관련 인수 기준**: F-03-5

---

#### SC-E-05: 할 일 생성 시 제목 누락
- **관련 기능**: F-03
- **전제 조건**: 로그인 상태(유효한 JWT 보유)
- **실행 단계**:
  1. 제목 없이 할 일 생성 요청
- **기대 결과**: HTTP 400, 생성 실패
- **관련 인수 기준**: F-03-4

---

#### SC-E-06: 미인증 상태에서 할 일 수정 시도
- **관련 기능**: F-05
- **전제 조건**: JWT 없음, 수정 대상 할 일 존재
- **실행 단계**:
  1. Authorization 헤더 없이 할 일 수정 요청
- **기대 결과**: HTTP 401 Unauthorized
- **관련 인수 기준**: F-05-1

---

#### SC-E-07: 타인 소유 할 일 수정 시도
- **관련 기능**: F-05
- **전제 조건**: 사용자 A 로그인 상태, 사용자 B 소유 할 일 존재
- **실행 단계**:
  1. 사용자 A가 사용자 B의 할 일 ID로 수정 요청
- **기대 결과**: HTTP 403 Forbidden
- **관련 인수 기준**: F-05-2

---

#### SC-E-08: 미인증 상태에서 할 일 삭제 시도
- **관련 기능**: F-06
- **전제 조건**: JWT 없음, 삭제 대상 할 일 존재
- **실행 단계**:
  1. Authorization 헤더 없이 할 일 삭제 요청
- **기대 결과**: HTTP 401 Unauthorized
- **관련 인수 기준**: F-06-1

---

#### SC-E-09: 타인 소유 할 일 삭제 시도
- **관련 기능**: F-06
- **전제 조건**: 사용자 A 로그인 상태, 사용자 B 소유 할 일 존재
- **실행 단계**:
  1. 사용자 A가 사용자 B의 할 일 ID로 삭제 요청
- **기대 결과**: HTTP 403 Forbidden
- **관련 인수 기준**: F-06-2

---

#### SC-E-10: 잘못된 상태 전이 시도 (DONE → DONE)
- **관련 기능**: F-07
- **전제 조건**: 로그인 상태, status=DONE인 본인 소유 할 일 존재
- **실행 단계**:
  1. 이미 DONE 상태인 할 일에 완료 처리 요청
- **기대 결과**: HTTP 400 Bad Request
- **관련 인수 기준**: F-07-3

---

#### SC-E-11: 잘못된 상태 전이 시도 (PENDING → PENDING)
- **관련 기능**: F-07
- **전제 조건**: 로그인 상태, status=PENDING인 본인 소유 할 일 존재
- **실행 단계**:
  1. 이미 PENDING 상태인 할 일에 완료 취소 요청
- **기대 결과**: HTTP 400 Bad Request
- **관련 인수 기준**: F-07-5

---

#### SC-E-12: 목록 조회 시 타인 항목 노출 여부 검증
- **관련 기능**: F-04
- **전제 조건**: 사용자 A, B 각각 할 일 보유, 사용자 A 로그인
- **실행 단계**:
  1. 사용자 A로 할 일 목록 조회 요청
- **기대 결과**: HTTP 200, 응답에 사용자 B의 항목 미포함
- **관련 인수 기준**: F-04-1

---

## 3. 통합 시나리오 (End-to-End)

#### SC-E2E-01: 직장인 김민준 — 업무 할 일 등록 및 마감 초과 확인
- **관련 기능**: F-01, F-02, F-03, F-04, F-07, F-08
- **전제 조건**: 김민준 계정 미존재
- **실행 단계**:
  1. 데스크탑에서 이메일·비밀번호·닉네임 입력 후 회원가입 → HTTP 201
  2. 동일 이메일·비밀번호로 로그인 → JWT 발급
  3. "Q1 보고서 제출" (제목), dueDate=3일 전 날짜로 할 일 생성 → status=PENDING
  4. "팀 회의 준비" (제목), dueDate 없이 할 일 생성 → status=PENDING
  5. 할 일 목록 조회 → "Q1 보고서 제출" overdue:true / "팀 회의 준비" overdue:false
  6. UI에서 "Q1 보고서 제출" 항목에 붉은 배지 표시 확인
  7. "Q1 보고서 제출" 완료 처리 → status=DONE
  8. 목록 재조회 → "Q1 보고서 제출" overdue:false (DONE이므로 배지 미표시)
- **기대 결과**: DONE 전환 후 overdue 배지가 사라지고, dueDate 없는 항목은 처음부터 배지 미표시
- **관련 인수 기준**: F-01-1, F-02-1, F-03-1, F-03-2, F-03-3, F-04-1, F-04-2, F-07-2, F-08-1, F-08-2

---

#### SC-E2E-02: 대학생 이수아 — 다중 기기 할 일 관리 및 권한 경계 확인
- **관련 기능**: F-01, F-02, F-03, F-04, F-05, F-06
- **전제 조건**: 이수아 계정 및 타계정(김민준) 각각 존재, 김민준 소유 할 일 1개 존재
- **실행 단계**:
  1. 스마트폰에서 이수아 계정으로 로그인 → JWT 발급
  2. "운영체제 과제" (제목), dueDate=내일로 할 일 생성 → status=PENDING
  3. 할 일 목록 조회 → 본인 항목만 표시, 김민준 항목 미포함 확인
  4. 노트북으로 전환, 동일 계정 재로그인 → 새 JWT 발급
  5. "운영체제 과제" 제목을 "운영체제 과제 (1차 제출)"로 수정 → HTTP 200
  6. 김민준 소유 할 일 ID로 수정 시도 → HTTP 403
  7. 김민준 소유 할 일 ID로 삭제 시도 → HTTP 403
  8. "운영체제 과제 (1차 제출)" 삭제 → HTTP 200(또는 204)
  9. 삭제된 항목 재조회 → HTTP 404
- **기대 결과**: 본인 항목만 CRUD 가능, 타인 항목 접근 시 403 반환, 삭제 후 404 확인
- **관련 인수 기준**: F-02-1, F-03-1, F-04-1, F-05-1, F-05-2, F-06-1, F-06-2, F-06-3

---

## 4. 시나리오 커버리지 요약

| 시나리오 유형 | 건수 | 커버 기능 |
|-------------|------|----------|
| 정상 흐름 (SC-H) | 11건 | F-01 ~ F-08 전체 |
| 예외 흐름 (SC-E) | 12건 | F-01, F-02, F-03, F-04, F-05, F-06, F-07 |
| 통합 E2E (SC-E2E) | 2건 | F-01 ~ F-08 전체 |
| **합계** | **25건** | |
